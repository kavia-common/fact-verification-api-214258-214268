{"is_source_file": true, "format": "Python", "description": "This file provides a set of classes and functions implementing search providers, including integrations with Bing Web Search, DuckDuckGo, and Wikipedia. It also includes utility functions for normalizing results, formulating search queries from claims, and a composite system to select among providers. The module exposes core functions for performing web searches and claim-based searches.", "external_files": ["httpx"], "external_methods": ["httpx.Client", "httpx.Client.get", "json().get"], "published": ["web_search", "search_for_claim"], "classes": [{"name": "SearchProvider", "description": "Abstract Base Class defining the search interface with an abstract method 'search'."}, {"name": "BingWebSearchProvider", "description": "Implements search using Bing Web Search API with API key-based authentication."}, {"name": "DuckDuckGoProvider", "description": "Implements a search provider using DuckDuckGo's HTML endpoint and naive parsing."}, {"name": "WikipediaSearchProvider", "description": "Implements search using Wikipedia's open search API."}, {"name": "CompositeProvider", "description": "Aggregates results from multiple providers, trying each until enough results are collected."}], "methods": [{"name": "Optional[str] _clean_text(s: Optional[str])", "description": "Cleans a string by stripping whitespace; returns None if input is None or empty.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] _norm_result(url: Optional[str], title: Optional[str], snippet: Optional[str], score: float = 0.0, source: Optional[str] = None, metadata: Optional[Dict[str, Any]] = None)", "description": "Normalizes raw search result data into a standardized dictionary format.", "scope": "", "scopeKind": ""}, {"name": "str _formulate_web_query_from_claim(claim: str)", "description": "Creates a concise search query string from a textual claim.", "scope": "", "scopeKind": ""}, {"name": "SearchProvider _get_provider()", "description": "Factory function to select and instantiate the appropriate search provider based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] web_search(query: str, top_k: int = 5)", "description": "High-level function to perform a web search with API provider selection.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] search_for_claim(claim: str, top_k: int = 5)", "description": "Constructs a search query from a claim and returns evidence search results.", "scope": "", "scopeKind": ""}, {"name": "__init__(self)", "scope": "DuckDuckGoProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, api_key: str, endpoint: Optional[str] = None, market: str = \"en-US\", safe: str = \"Off\")", "scope": "BingWebSearchProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, language: str = \"en\")", "scope": "WikipediaSearchProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, providers: List[SearchProvider])", "scope": "CompositeProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Dict[str,Any]] search(self, query: str, top_k: int = 5)", "scope": "WikipediaSearchProvider", "scopeKind": "class", "description": "unavailable"}], "calls": ["httpx.Client()", "client.get()", "resp.json()", "resp.raise_for_status()", "data.get()", "html.find()"], "search-terms": ["SearchProvider", "BingWebSearchProvider", "DuckDuckGoProvider", "WikipediaSearchProvider", "web_search", "search_for_claim", "composite", "API key", "naive HTML parsing", "environment variable", "normalize result"], "state": 2, "file_id": 10, "knowledge_revision": 33, "git_revision": "8f86eabf6626440e9af4beb4ee0f7369c311cae6", "revision_history": [{"24": "2344323706f66773742d860157a9ca24ebfc8b7c"}, {"33": "8f86eabf6626440e9af4beb4ee0f7369c311cae6"}], "ctags": [{"_type": "tag", "name": "BingWebSearchProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class BingWebSearchProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CompositeProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class CompositeProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DuckDuckGoProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class DuckDuckGoProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SearchProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class SearchProvider(ABC):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WikipediaSearchProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class WikipediaSearchProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DuckDuckGoProvider", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self, api_key: str, endpoint: Optional[str] = None, market: str = \"en-US\", safe/", "language": "Python", "kind": "member", "signature": "(self, api_key: str, endpoint: Optional[str] = None, market: str = \"en-US\", safe: str = \"Off\")", "scope": "BingWebSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self, language: str = \"en\"):$/", "language": "Python", "kind": "member", "signature": "(self, language: str = \"en\")", "scope": "WikipediaSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self, providers: List[SearchProvider]):$/", "language": "Python", "kind": "member", "signature": "(self, providers: List[SearchProvider])", "scope": "CompositeProvider", "scopeKind": "class"}, {"_type": "tag", "name": "_clean_text", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _clean_text(s: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(s: Optional[str])"}, {"_type": "tag", "name": "_formulate_web_query_from_claim", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _formulate_web_query_from_claim(claim: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(claim: str)"}, {"_type": "tag", "name": "_get_provider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _get_provider() -> SearchProvider:$/", "language": "Python", "typeref": "typename:SearchProvider", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_norm_result", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _norm_result(url: Optional[str], title: Optional[str], snippet: Optional[str], score: float /", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(url: Optional[str], title: Optional[str], snippet: Optional[str], score: float = 0.0, source: Optional[str] = None, metadata: Optional[Dict[str, Any]] = None)"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "BingWebSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "CompositeProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "DuckDuckGoProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "SearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "WikipediaSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search_for_claim", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def search_for_claim(claim: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(claim: str, top_k: int = 5)"}, {"_type": "tag", "name": "web_search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def web_search(query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(query: str, top_k: int = 5)"}], "hash": "1ed06c3099b1170becfd545317b039f6", "format-version": 4, "code-base-name": "inference_backend", "filename": "inference_backend/src/services/search.py"}