{"is_source_file": true, "format": "Python", "description": "This file defines an abstract interface for search providers and multiple concrete implementations for different search engines, including Bing, DuckDuckGo, and Wikipedia. It also provides helper functions to perform web searches and formulate queries from claims.", "external_files": ["httpx"], "external_methods": ["httpx.Client", "resp.raise_for_status", "resp.json"], "published": ["web_search", "search_for_claim"], "classes": [{"name": "SearchProvider", "description": "Abstract base class defining the interface for search providers."}, {"name": "BingWebSearchProvider", "description": "Implementation of SearchProvider using Bing Web Search API."}, {"name": "DuckDuckGoProvider", "description": "Implementation of SearchProvider for DuckDuckGo search."}, {"name": "WikipediaSearchProvider", "description": "Implementation of SearchProvider utilizing Wikipedia's API."}, {"name": "CompositeProvider", "description": "Combines multiple SearchProvider instances to gather results."}], "methods": [{"name": "Optional[str] _clean_text(s: Optional[str])", "description": "Cleans text input by stripping whitespace and handling None values.", "scope": "", "scopeKind": ""}, {"name": "Optional[Dict[str,Any]] _norm_result(url: Optional[str], title: Optional[str], snippet: Optional[str], score: float = 0.0, source: Optional[str] = None, metadata: Optional[Dict[str, Any]] = None)", "description": "Normalizes search results into a consistent dictionary structure.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] search(self, query: str, top_k: int = 5)", "description": "Abstract method to perform a search given a query and return results.", "scope": "WikipediaSearchProvider", "scopeKind": "class"}, {"name": "BingWebSearchProvider.__init__", "description": "Initializes Bing search provider with API key and optional endpoint."}, {"name": "BingWebSearchProvider.search", "description": "Performs a web search using Bing API and returns normalized results."}, {"name": "DuckDuckGoProvider.search", "description": "Performs a search on DuckDuckGo via parsing HTML results."}, {"name": "WikipediaSearchProvider.search", "description": "Performs a Wikipedia API search and returns normalized results."}, {"name": "str _formulate_web_query_from_claim(claim: str)", "description": "Creates a search query string from a claim sentence.", "scope": "", "scopeKind": ""}, {"name": "SearchProvider _get_provider()", "description": "Selects and returns an appropriate SearchProvider based on environment variables.", "scope": "", "scopeKind": ""}, {"name": "CompositeProvider.__init__", "description": "Initializes with a list of multiple search providers."}, {"name": "CompositeProvider.search", "description": "Aggregates results from multiple providers until top_k results are collected."}, {"name": "List[Dict[str,Any]] web_search(query: str, top_k: int = 5)", "description": "Performs a web search using a pluggable provider system based on environment settings.", "scope": "", "scopeKind": ""}, {"name": "List[Dict[str,Any]] search_for_claim(claim: str, top_k: int = 5)", "description": "Formulates a query from a claim and delegates to web_search to find evidence.", "scope": "", "scopeKind": ""}, {"name": "__init__(self)", "scope": "DuckDuckGoProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, api_key: str, endpoint: Optional[str] = None, market: str = \"en-US\", safe: str = \"Off\")", "scope": "BingWebSearchProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, language: str = \"en\")", "scope": "WikipediaSearchProvider", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, providers: List[SearchProvider])", "scope": "CompositeProvider", "scopeKind": "class", "description": "unavailable"}], "calls": ["httpx.Client", "client.get", "resp.raise_for_status", "resp.json", "html.find", "urllib.parse.urlparse", "urllib.parse.parse_qs", "urllib.parse.unquote"], "search-terms": ["SearchProvider", "BingWebSearchProvider", "DuckDuckGoProvider", "WikipediaSearchProvider", "web_search", "search_for_claim", "InferenceBackend"], "state": 2, "file_id": 10, "knowledge_revision": 45, "git_revision": "ee43fa8e3a0ff1d21272a9c5291ae6c2a40657f6", "revision_history": [{"24": "2344323706f66773742d860157a9ca24ebfc8b7c"}, {"33": "8f86eabf6626440e9af4beb4ee0f7369c311cae6"}, {"45": "ee43fa8e3a0ff1d21272a9c5291ae6c2a40657f6"}], "ctags": [{"_type": "tag", "name": "BingWebSearchProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class BingWebSearchProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CompositeProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class CompositeProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DuckDuckGoProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class DuckDuckGoProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SearchProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class SearchProvider(ABC):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WikipediaSearchProvider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^class WikipediaSearchProvider(SearchProvider):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "DuckDuckGoProvider", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self, api_key: str, endpoint: Optional[str] = None, market: str = \"en-US\", safe/", "language": "Python", "kind": "member", "signature": "(self, api_key: str, endpoint: Optional[str] = None, market: str = \"en-US\", safe: str = \"Off\")", "scope": "BingWebSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self, language: str = \"en\"):$/", "language": "Python", "kind": "member", "signature": "(self, language: str = \"en\")", "scope": "WikipediaSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def __init__(self, providers: List[SearchProvider]):$/", "language": "Python", "kind": "member", "signature": "(self, providers: List[SearchProvider])", "scope": "CompositeProvider", "scopeKind": "class"}, {"_type": "tag", "name": "_clean_text", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _clean_text(s: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(s: Optional[str])"}, {"_type": "tag", "name": "_formulate_web_query_from_claim", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _formulate_web_query_from_claim(claim: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(claim: str)"}, {"_type": "tag", "name": "_get_provider", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _get_provider() -> SearchProvider:$/", "language": "Python", "typeref": "typename:SearchProvider", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_norm_result", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def _norm_result(url: Optional[str], title: Optional[str], snippet: Optional[str], score: float /", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "function", "signature": "(url: Optional[str], title: Optional[str], snippet: Optional[str], score: float = 0.0, source: Optional[str] = None, metadata: Optional[Dict[str, Any]] = None)"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "BingWebSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "CompositeProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "DuckDuckGoProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "SearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^    def search(self, query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, query: str, top_k: int = 5)", "scope": "WikipediaSearchProvider", "scopeKind": "class"}, {"_type": "tag", "name": "search_for_claim", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def search_for_claim(claim: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(claim: str, top_k: int = 5)"}, {"_type": "tag", "name": "web_search", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/search.py", "pattern": "/^def web_search(query: str, top_k: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(query: str, top_k: int = 5)"}], "hash": "4ed6b6c52543b66e1f12ea273716c58a", "format-version": 4, "code-base-name": "inference_backend", "filename": "inference_backend/src/services/search.py"}