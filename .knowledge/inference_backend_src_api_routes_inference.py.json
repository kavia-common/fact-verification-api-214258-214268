{"is_source_file": true, "format": "Python", "description": "This file defines API routes for inference operations in a FastAPI application. It includes two endpoints: one for running inference on a text input, and another for streaming inference results as NDJSON. The code uses various services for sentence splitting, claim detection, searching, scoring, and streaming event generation, facilitating an advanced claim verification pipeline.", "external_files": ["src.api.deps.auth", "src.api.deps.labels", "src.models.schemas", "src.services.sentencizer", "src.services.claim_detection", "src.services.search", "src.services.evidence_scoring", "src.services.streaming", "src.services.logger"], "external_methods": ["auth_required", "label_context", "get_sentences", "detect_claims", "search_for_claim", "categorize_and_score", "make_sentence_event", "make_evidence_event", "make_score_event", "make_done_event", "as_fastapi_streaming_response", "log_info", "time_block"], "published": ["run_inference", "stream_inference"], "classes": [{"name": "SentenceChunk", "description": "Data model representing a sentence chunk with text and claim flag."}, {"name": "ClaimResult", "description": "Data model representing the result of claim detection, including supporting evidence, score, and label."}], "methods": [{"name": "InferenceResponse run_inference( payload: InferenceRequest, response: Response, label: Dict[str, Any] = Depends(label_context), )", "description": "Handles standard API request to perform full inference pipeline: sentence splitting, claim detection, search, and scoring, returning a structured response.", "scope": "", "scopeKind": ""}, {"name": "stream_inference( payload: InferenceRequest, response: Response, user: Dict[str, Any] = Depends(auth_required), label: Dict[str, Any] = Depends(label_context), )", "description": "Streams incremental inference results as NDJSON, including sentence, evidence, and claim scoring data, suitable for real-time applications.", "scope": "", "scopeKind": ""}, {"name": "Iterator[Dict[str,Any]] _generate()", "scope": "stream_inference", "scopeKind": "function", "description": "unavailable"}], "calls": ["get_sentences", "detect_claims", "search_for_claim", "categorize_and_score", "make_sentence_event", "make_evidence_event", "make_score_event", "make_done_event", "as_fastapi_streaming_response", "log_info", "time_block"], "search-terms": ["inference_pipeline", "claim_detection", "streaming_inference", "score_claims", "claim_verification_api", "ndjson_stream", "proof_pipeline"], "state": 2, "file_id": 5, "knowledge_revision": 76, "git_revision": "6308a0f3836d691978d894f7441423bdba6ace37", "revision_history": [{"12": ""}, {"29": "719e7039cf83ec8a66e21f89e12c0a7b63891a85"}, {"38": "6ed2044af296ed3bfeb1e2cf08aceff57c21bcdf"}, {"39": "6ed2044af296ed3bfeb1e2cf08aceff57c21bcdf"}, {"41": "21d3040752163795ee236ad18557cd61d7fcdc01"}, {"42": "21d3040752163795ee236ad18557cd61d7fcdc01"}, {"51": "21d3040752163795ee236ad18557cd61d7fcdc01"}, {"52": "21d3040752163795ee236ad18557cd61d7fcdc01"}, {"53": "21d3040752163795ee236ad18557cd61d7fcdc01"}, {"54": "6308a0f3836d691978d894f7441423bdba6ace37"}, {"55": "6308a0f3836d691978d894f7441423bdba6ace37"}, {"76": "6308a0f3836d691978d894f7441423bdba6ace37"}], "ctags": [{"_type": "tag", "name": "_generate", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/api/routes/inference.py", "pattern": "/^    def _generate() -> Iterator[Dict[str, Any]]:$/", "file": true, "language": "Python", "typeref": "typename:Iterator[Dict[str,Any]]", "kind": "function", "signature": "()", "scope": "stream_inference", "scopeKind": "function"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/api/routes/inference.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "run_inference", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/api/routes/inference.py", "pattern": "/^def run_inference($/", "language": "Python", "typeref": "typename:InferenceResponse", "kind": "function", "signature": "( payload: InferenceRequest, response: Response, label: Dict[str, Any] = Depends(label_context), )"}, {"_type": "tag", "name": "stream_inference", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/api/routes/inference.py", "pattern": "/^def stream_inference($/", "language": "Python", "kind": "function", "signature": "( payload: InferenceRequest, response: Response, user: Dict[str, Any] = Depends(auth_required), label: Dict[str, Any] = Depends(label_context), )"}], "hash": "d0055847f6bbae7878907591da0acc96", "format-version": 4, "code-base-name": "inference_backend", "filename": "inference_backend/src/api/routes/inference.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}