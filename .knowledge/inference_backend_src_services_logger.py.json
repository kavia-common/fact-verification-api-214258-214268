{"is_source_file": true, "format": "Python", "description": "This file defines a custom logging utility for structured JSON logs, including a function for creating a logger, helper functions for logging at different levels (info, error, debug), and a context manager for timing operations with automatic logging of start, end, and errors.", "external_files": ["json", "logging", "sys", "time", "contextlib", "typing"], "external_methods": ["json.dumps", "logging.getLogger", "logging.StreamHandler", "logging.Formatter", "logging.getLogger", "sys.stdout", "time.time", "time.perf_counter"], "published": ["log_info", "log_error", "log_debug", "time_block"], "classes": [{"name": "_JsonFormatter", "description": "Custom logging formatter that outputs logs in a JSON-like structure with timestamp, level, message, logger name, and optional additional fields."}], "methods": [{"name": "int _default_level()", "description": "Returns the default log level, currently set to INFO.", "scope": "", "scopeKind": ""}, {"name": "logging.Logger _ensure_logger()", "description": "Creates and configures a logger named 'inference' with a stream handler and a custom JSON formatter if not already configured.", "scope": "", "scopeKind": ""}, {"name": "None log_info(message: str, **fields: Any)", "description": "Logs an informational message with optional structured fields.", "scope": "", "scopeKind": ""}, {"name": "None log_error(message: str, **fields: Any)", "description": "Logs an error message with optional structured fields.", "scope": "", "scopeKind": ""}, {"name": "None log_debug(message: str, **fields: Any)", "description": "Logs a debug message with optional structured fields.", "scope": "", "scopeKind": ""}, {"name": "time_block( name: str, *, request_id: Optional[str] = None, client_label: Optional[str] = None, **fields: Any, )", "description": "A context manager that logs the start and end of a block, including elapsed time and errors if they occur.", "scope": "", "scopeKind": ""}, {"name": "str format(self, record: logging.LogRecord)", "scope": "_ensure_logger._JsonFormatter", "scopeKind": "class", "description": "unavailable"}], "calls": ["json.dumps", "logging.getLogger", "logging.StreamHandler", "logging.Formatter", "logger.setLevel", "logger.addHandler", "logger.propagate", "time.time", "time.perf_counter"], "search-terms": ["logger", "structured logs", "JSON formatter", "timing context", "inference logging"], "state": 2, "file_id": 14, "knowledge_revision": 50, "git_revision": "", "ctags": [{"_type": "tag", "name": "_JsonFormatter", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^        class _JsonFormatter(logging.Formatter):$/", "file": true, "language": "Python", "kind": "class", "scope": "_ensure_logger", "scopeKind": "function"}, {"_type": "tag", "name": "_LOGGER", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^_LOGGER = _ensure_logger()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_default_level", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^def _default_level() -> int:$/", "language": "Python", "typeref": "typename:int", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_ensure_logger", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^def _ensure_logger() -> logging.Logger:$/", "language": "Python", "typeref": "typename:logging.Logger", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "format", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^            def format(self, record: logging.LogRecord) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, record: logging.LogRecord)", "scope": "_ensure_logger._JsonFormatter", "scopeKind": "class"}, {"_type": "tag", "name": "log_debug", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^def log_debug(message: str, **fields: Any) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(message: str, **fields: Any)"}, {"_type": "tag", "name": "log_error", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^def log_error(message: str, **fields: Any) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(message: str, **fields: Any)"}, {"_type": "tag", "name": "log_info", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^def log_info(message: str, **fields: Any) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(message: str, **fields: Any)"}, {"_type": "tag", "name": "time_block", "path": "/home/kavia/workspace/code-generation/fact-verification-api-214258-214268/inference_backend/src/services/logger.py", "pattern": "/^def time_block($/", "language": "Python", "kind": "function", "signature": "( name: str, *, request_id: Optional[str] = None, client_label: Optional[str] = None, **fields: Any, )"}], "hash": "985a9930407696638127dc647c2e1768", "format-version": 4, "code-base-name": "inference_backend", "filename": "inference_backend/src/services/logger.py", "fields": [{"name": "_LOGGER = _ensure_logger()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"50": ""}]}